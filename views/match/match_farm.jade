extend match

block match_content
  .row
    .col-md-12
      +data_table({id:"distribution", summable:true, rankable:true, heading:"Distribution"})
        each player, i in match.players
          +data_table_header(i, match)
            tr
              th: abbr(title=tooltips.hero_id) Hero
              th: abbr(title=tooltips.farm_heroes) Heroes
              th: abbr(title=tooltips.farm_creeps) Creeps
              th: abbr(title=tooltips.farm_neutrals) Neutrals
              th: abbr(title=tooltips.farm_ancients) Ancients
              th: abbr(title=tooltips.farm_towers) Towers
              th: abbr(title=tooltips.farm_couriers) Couriers
              th: abbr(title=tooltips.farm_roshan) Roshan
              th: abbr(title=tooltips.farm_necronomicon) Necronomicon
              th Other
          tr(class = player.isRadiant ? "radiant" : "dire")
            - var hero = constants.heroes[player.hero_id]
            if match.upload
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "", match.upload.player_info[i])
            else
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "")

            td.rankable #{player.hero_kills || "-"}
            td.rankable #{player.lane_kills || "-"}
            td.rankable #{player.neutral_kills || "-"}
            td.rankable #{player.ancient_kills || "-"}
            td.rankable #{player.tower_kills || "-"}
            td.rankable #{player.courier_kills || "-"}
            td.rankable #{player.roshan_kills || "-"}
            td.rankable #{player.necronomicon_kills || "-"}
            td.small
              each val, key in player.specific || {}
                div #{val} #{key}
  .row
    .col-md-12
      +data_table({id:"last_hits", summable:true, heading:"Last Hits", rankable: true})
        - var bucket = 300
        each player, ind in match.players
          +data_table_header(ind, match)
            tr
              th: abbr(title=tooltips.hero_id) Hero
              - for (var i = 0; i <= match.duration; i+=bucket)
                th= i/60+"'"
          tr(class = player.isRadiant ? "radiant" : "dire")
            if match.upload
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "", match.upload.player_info[ind])
            else
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "")
            - for (var i = 0; i <= match.duration + bucket; i+=bucket)
              td.rankable #{player.lh_t ? player.lh_t[i/60] : "-"}

  //
    +ad("banner2")

  .row
    .col-md-8
      +data_table({id:"gold", summable:true, heading:"Gold", rankable: true})
        each player, i in match.players
          +data_table_header(i, match)
            tr
              th: abbr(title=tooltips.hero_id) Hero
              each val, key in constants.gold_reasons
                th: abbr(title=val.tooltip)=val.name
          tr(class = player.isRadiant ? "radiant" : "dire")
            - var hero = constants.heroes[player.hero_id]
            - player.gold_reasons = player.gold_reasons || {}
            if match.upload
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "", match.upload.player_info[i])
            else
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "")

            each val, key in constants.gold_reasons
              td.rankable #{player.gold_reasons[key] || "-"}

    .col-md-4
      +data_table({id:"xp", summable:true, heading:"XP", rankable: true})
        each player, i in match.players
          +data_table_header(i, match)
            tr
              th: abbr(title=tooltips.hero_id) Hero
              each val, key in constants.xp_reasons
                th=val
          tr(class = player.isRadiant ? "radiant" : "dire")
            - var hero = constants.heroes[player.hero_id]
            - player.xp_reasons = player.xp_reasons || {}
            if match.upload
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "", match.upload.player_info[i])
            else
              +hero_td(player, player.abandons ? constants.leaver_status[player.leaver_status] : "")

            each val, key in constants.xp_reasons
              td.rankable #{player.xp_reasons[key] || "-"}
